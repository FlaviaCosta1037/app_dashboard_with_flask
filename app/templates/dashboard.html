{% extends "base.html" %}

{% block content %}
<h2>ðŸ“Š Dashboard do Projeto</h2>

<a href="{{ url_for('new_visual') }}" class="btn">
  âž• Novo GrÃ¡fico
</a>

<div class="dashboard">
  {% for chart in charts %}
    <div class="card">
      <canvas id="chart-{{ loop.index }}"></canvas>
    </div>
  {% endfor %}
</div>

<script>
const charts = {{ charts | tojson }};
charts.forEach((chart, index) => {
  new Chart(document.getElementById(`chart-${index + 1}`), {
    type: chart.type,
    data: {
      labels: chart.labels,
      datasets: chart.datasets
    },
    options: { responsive: true }
  });
});
</script>
{% endblock %}
